{% load static %}

<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  	<title>P3 Coloring</title>

	<link rel="stylesheet" type="text/css" href="{% static 'coloring/vendors/bootstrap/css/bootstrap.css' %}" />
	<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	
	<script src="{% static 'coloring/vendors/jquery/jquery-3.3.1.min.js' %}"></script>
	<script src="{% static 'coloring/vendors/jquery-ui/jquery-ui.min.js' %}"></script>

	<script type="text/javascript" src="{% static 'coloring/vendors/jquery/jquery-3.3.1.min.js' %}"></script>
	<script type="text/javascript" src="{% static 'coloring/vendors/paper/paper-full.min.js' %}"></script>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@100;300&display=swap" rel="stylesheet">

	<style type="text/css">

		body {
			height: 100%;
			overflow-y: hidden;
		}
		
		#color-palette {
			width: 400px;
			margin: auto;
			display: flex;
			flex-wrap: wrap;
			padding: 36px;	
		}

		.swatch {
			width: 36px;
			height: 36px;
			-moz-border-radius: 12px;
			-webkit-border-radius: 12px;
			border-radius: 12px;
			margin: 3px;
			transition: box-shadow .3s;
		}
		
		.swatch:hover {
			box-shadow: 0 0 22px rgba(33,33,33,.2); 
			transform: scale(1.05,1.05);
		}

		#myCanvas {
			padding-left: 0;
		    padding-right: 0;
		    margin-left: auto;
		    margin-right: auto;
		    display: block;
		}

		.canvas {
			min-width: calc(100vw - 97px);
			min-height: 500px;
			display: flex;
			justify-content: center;
			align-items: center;
		}

		.navbar {
			background-color: #E0E0E0;
			min-height: 75px;
		}

		#myButton, #myInput, .save-text, #newTemplate {
			font-family: 'Work Sans', sans-serif;
			font-size: 22px;
		}

	
		.main {
			height: calc(100vh - 90px);
			border: solid blck 3px;
		}

		.sidebar {
			background-color: #E0E0E0;
			max-width: 89px;
			min-height: calc(100vh - 95px);
		}

		ul > li {
			margin-top: 15px;
		}

		.nav-item {
			transition: box-shadow .3s;
			border-radius: 20px;
			margin: auto;
			font-size: 38px;
		}

		.sidebar > .navbar-nav > .nav-item {
			padding-left: 9px;
			padding-right: 9px;
		}

		.nav-item:hover {
			box-shadow: 0 0 22px rgba(33,33,33,.2); 
			transform: scale(1.05,1.05);
			border-radius: 20px;
		}
		
		.nav-link {
			color: black;
			text-align: center;
			font-size: 38px;
		}

		.nav-link:hover{
			color: black;
		}

		.navbar-brand {
			padding: 0px;
			margin-left: 72px;
		}

		.active {
			margin-left: 30px;
		}

		.button {
			border-radius: 5px;
			box-shadow: 0  17px 10px -10px rgba(0, 0, 0, 0.4);
			cursor: pointer;
			transition: all ease-in-out 300ms;
		}

		.button:hover {
			box-shadow: 0  37px 20px -20px rgba(0, 0, 0, 0.2);
		    transform: translate(0, -10px);
		}

		input:focus, select:focus, textarea:focus, button:focus {
            outline: none;
        }

		.form-control:focus {
			border-color: inherit;
			-webkit-box-shadow: none;
			box-shadow: none;
		}

		.pen-bar{
			background-color: #F3F2F2;
			height: 40px;
			width: 245px;
			display: flex;
  			align-items: center;
  			justify-content: center
		}

		.pen-line{
			height: 20px;
			width: 200px;
		}

		.slidecontainer {
  			width: 100%;
		}

		.slider {
			-webkit-appearance: none;
			width: 100%;
			height: 25px;
			background: #d3d3d3;
			outline: none;
			opacity: 0.7;
			-webkit-transition: .2s;
			transition: opacity .2s;
		}

		.carousel {
			height: 500px;
			
		}

		img {
			height: 300px;
			width: 300px;
			margin: auto auto;
		}

		.carousel-control-prev-icon,
		.carousel-control-next-icon {
			height: 100px;
			width: 100px;
			outline: black;
			background-size: 100%, 100%;
			border-radius: 50%;
			background-image: none;
		}

		.carousel-control-next-icon:after {
			content: '>';
			font-size: 55px;
			color:black;
		}

		.carousel-control-prev-icon:after {
			content: '<';
			font-size: 55px;
			color: black;
		}
		.carousel-item {
			margin-left: 0;
			vertical-align: middle;
			position: relative;
			height: 100%;
		}
		.carousel-inner {
			height: 736px;
		}
		

	</style>
	
	<script type="text/javascript" canvas="canvas">
		window.onload = function() {
			var canvas = document.getElementById('myCanvas');
			
			// coloring page
			var mandala = {
				item: null,
				lastClicked: null,
				filePath: '/static/coloring/images/mandala-freepik.svg'
			};

			// color palette
			var cp = {
				history: ["#000000"], // black selected by default
				options: [],
				$container: $('#color-palette')
			}

			function myCustomInteraction() {
				var tool = new paper.Tool();

				tool.onMouseDown = function (event) {
				    var hit = mandala.item.hitTest(event.point, { tolerance: 10, fill: true });
				    if (hit) {
				    		// Color pallette keeps track of the full history of colors, though we
				    		// only color in with the most-recent color.
				        hit.item.fillColor = cp.history[cp.history.length - 1];
				    }
				}
			}

			// create a color palette with the given colors
			function createColorPalette(colors){

				// create a swatch for each color
				for (var i = colors.length - 1; i >= 0; i--) {
					var $swatch = $("<div>").css("background-color", colors[i])
									   .addClass("swatch");
					$swatch.click(function(){
						// add color to the color palette history
					  	cp.history.push($(this).css("background-color"));
					});
					cp.$container.append($swatch);
				}
			}

			// loads a set of colors from a json to create a color palette
			function getColorsCreatePalette(){
				cp.$container.html(" ");
				$.getJSON('/static/coloring/vendors/material/material-colors.json', function(colors){
					var keys = Object.keys(colors);
					for (var i = keys.length - 1; i >= 0; i--) {
						cp.options.push(colors[keys[i]][500]);
					}
					createColorPalette(cp.options);
				});
			}

			function init(custom){
				paper.setup(canvas);
				getColorsCreatePalette();

				paper.project.importSVG(mandala.filePath, function(item) {
					mandala.item = item._children["design-freepik"];
				    paper.project.insertLayer(0,mandala.item);

				    if (custom) {
				    	myCustomInteraction();
				    } else {
				    	myGradientInteraction();
				    }

				});
			}

			// Set up the mandala interactivity.
			init(true);

			

			document.getElementById('myButton').onclick = function() {
				if (document.getElementById('myInput').readOnly === true) {
					document.getElementById('myInput').removeAttribute('readonly')
				} else {
					document.getElementById('myInput').readOnly = true;
				}
			}

			var input = document.getElementById("myInput");
			input.addEventListener("keyup", function(e) {
				if (e.keyCode === 13) {
					document.getElementById('myButton').click();
				}
			});
		}
	</script>
</head>
<body>
	
<!--MODALS-->

	<!--TEMPLATE MODAL-->
	<div class="modal" id="templatemodal">
		<div class="modal-dialog modal-dialog-centered modal-lg">
			<div class="modal-content save-modal">
				<div class="modal-header">
					<h3 class='col-12 modal-title text-center save-text'>
						Select Template	
					</h3>
				</div>
			  	<div class="modal-body">
					<div class="container">
						<div class="row align-items-center justify-content-center">
						  <div class="col">
							<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
								<div class="carousel-inner h-100">
								  <div class="carousel-item active">
									<div class="d-flex h-100 align-items-center justify-content-center">
										<img class="img" src="https://www.researchgate.net/profile/Gareth-Roberts-3/publication/251839685/figure/fig3/AS:652228557803529@1532514814266/a-A-SEVIRI-400-x-400-pixel-scene-of-southern-Africa-September-4-th-1212pm.png" alt="First slide">
									</div>
								  </div>
								  <div class="carousel-item">
									<div class="d-flex h-100 align-items-center justify-content-center">
										<img class="img" src="https://www.researchgate.net/profile/Gareth-Roberts-3/publication/251839685/figure/fig3/AS:652228557803529@1532514814266/a-A-SEVIRI-400-x-400-pixel-scene-of-southern-Africa-September-4-th-1212pm.png" alt="Second slide">
									</div>
								  </div>
								  <div class="carousel-item">
									<div class="d-flex h-100 align-items-center justify-content-center">
										<img class="img" src="https://www.researchgate.net/profile/Gareth-Roberts-3/publication/251839685/figure/fig3/AS:652228557803529@1532514814266/a-A-SEVIRI-400-x-400-pixel-scene-of-southern-Africa-September-4-th-1212pm.png" alt="Third slide">
									</div>
								  </div>
								</div>
								<a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
								  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
								  <span class="sr-only">Previous</span>
								</a>
								<a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
								  <span class="carousel-control-next-icon" aria-hidden="true"></span>
								  <span class="sr-only">Next</span>
								</a>
							  </div>
						  </div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- SAVE MODAL-->
	<div class="modal" tabindex="-1" role="dialog" id="savemodal">
		<div class="modal-dialog modal-dialog-centered" role="document">
		  <div class="modal-content save-modal">
			<div class="modal-body">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				  </button>
				<form>
					<div class="form-group">
					  <label for="file-name" class="col-form-label save-text">Save As:</label>
					  <input type="text" class="form-control save-text" id="file-name" autocomplete="off">
					</div>
					<div class="form-group">
					  <label for="tags" class="col-form-label save-text">Tags:</label>
					  <input style="width: 466px;" class="form-control save-text" id="tags" autocomplete="off">
					</div>
				  </form>
				  <br>
				  
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Save</button>
			  </div>
		  </div>
		</div>
	</div>

	<!-- PEN MODAL-->
	<div class="modal" tabindex="-1" role="dialog" id="penmodal">
		<div class="modal-dialog modal-dialog-centered" role="document">
		  <div class="modal-content">
			<div class="modal-header">
				<h3 class='col-12 modal-title text-center save-text'>
					Pen Settings	
				</h3>
			</div>
			<div class="modal-body">
			  <div class="container-fluid">
					<div class="row" style="height:20%">
						<div class="col-md-12 text-center">
							<button type="button" class="btn" style="width:120px;background-color:#F3F2F2">Pen</button>
							<button type="button" class="btn" style="width:120px;background-color:#F3F2F2">Marker</button>
						</div>
					</div>
					<div class="row" style="height:20px"></div>
					<div class="row" style="height:20%">
						<div class="col"></div>
						<div class="col">
							<div class="pen-bar">
								<input type="color" class="pen-line">
							</div>
						</div>
						<div class="col"></div>
					</div>
					<div class="row" style="height:20px"></div>
					<div class="row" style="height:20%"></div>
						<div class="col-md-12 text-center">
							<button type="button" class="btn" style="width:120px;background-color:#F3F2F2">Opacity</button>
							<button type="button" class="btn" style="width:120px;background-color:#F3F2F2">Thickness</button>
						</div>
					<div class="row" style="height:20px"></div>
					<div class="row" style="height:40%">
						<div class="col"></div>
						<div class="col">
							<div class="slidecontainer" style="width:245px">
  							<input type="range" min="1" max="100" value="50" class="slider">
							</div>
						</div>
						<div class="col"></div>
					</div>
					<div class="row" style="height:40%">
						<div class="col"></div>
						<div class="col-4 text-left">0.0</div>
						<div class="col-4 text-right">1.0</div>
						<div class="col"></div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			  </div>
		  </div>
		</div>
	  </div>


	<!-- COLOR MODAL-->
	<div class="modal" tabindex="-1" role="dialog" id="colormodal">
		<div class="modal-dialog modal-dialog-centered" role="document">
		  <div class="modal-content">
			<div class="modal-body">
				<div class="container">
					<div class="row">
						<div class="col">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</div>
					</div>
					<div class="row justify-content-center">
						<div class="col " id="color-palette">
						
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
			  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			</div>
		  </div>
		</div>
	</div>

	<!-- TOP NAV BAR -->
	<nav class="navbar navbar-expand-sm navbar-light">
		<a class="navbar-brand" id="projectname">
			<div class="input-group">
				<div class="input-group-prepend">
					<button class="btn btn-outline-secondary" type="button" id="myButton">Name</button>
				</div>
				<input type="text" class="form-control" id="myInput" placeholder="Untitled project">
			</div>			
		</a>
		  <div class="navbar-nav ml-auto align-items-center">
			<a class="nav-item nav-link active" href="#">
				<i class="fas fa-search-plus"></i>
				</span>
			</a>
			<a class="nav-item nav-link active" href="#">
				<i class="fas fa-search-minus"></i>
			</a>
			<a class="nav-link active" id="newTemplate">New Template</a>
			<a class="nav-item nav-link active" href="#templatemodal" data-toggle="modal">
				<i class="fas fa-plus"></i>
			</a>
		  </div>
	</nav>

	<!-- SIDE BAR AND CANVAS -->
	<div class="container-fluid main">
		<div class="row">
			<div class="col-1 sidebar">
				<ul class="navbar-nav">
					<li class="nav-item">
					  <a data-toggle="modal" href="#savemodal" class="nav-link">
						  <i class="fas fa-save"></i></a>
					</li>
					<li class="nav-item">
					  <a data-toggle="modal" href="#penmodal" class="nav-link">
						<i class="fas fa-pen-nib"></i>
						</a>
					</li>
					<li class="nav-item">
					  <a data-toggle="modal" href="#colormodal" class="nav-link">
						<span>&#127912;</span>

						</a>
					</li>
					<li class="nav-item">
					  <a class="nav-link" href="#">
						<i class="fas fa-eraser"></i>
					  </a>
					</li>
					<li class="nav-item">
					  <a class="nav-link" href="#">
						<i class="fas fa-redo"></i>
						</a>
					</li>
					<li class="nav-item">
					  <a class="nav-link" href="#">
						<i class="fas fa-undo"></i>
						</a>
					</li>
				  </ul>
			</div>
			<div class="col-11 canvas">  
				<canvas id="myCanvas" width="770px" height="770px"></canvas>           
			</div>
		</div>
	</div>

</body>
</html>
